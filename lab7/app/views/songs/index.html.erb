<h1>Songs</h1>

<%= form_with url: songs_path, method: :get, local: true do |form| %>
  <div>
    <%= form.label :q, "Search by song title or artist name:" %>
    <%= form.text_field :q, value: params[:q], placeholder: "Enter search term..." %>
    <%= form.submit "Search" %>
  </div>
<% end %>

<ul>
  <% @songs.each do |song| %>
    <li class="fancy-list">
      <div class="fancy-text">
        <strong><%= song.title %></strong>
        <% if song.artists.any? %>
          <span>by <%= song.artists.map(&:name).join(", ") %></span>
        <% end %>
      </div>
      <div class="song-actions">
        <%= link_to "Show", song_path(song) %>
        <% if policy(Song).edit? %>
          <%= link_to 'Edit', edit_song_path(song) %>
          <%= link_to 'Delete', song_path(song), method: :delete, data: { confirm: "Are you sure?" } %>
        <% end %>
      </div>
    </li>
  <% end %>
</ul>